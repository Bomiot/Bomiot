import{c as P,a as s,h as g,d as K,C as se,R as le,aR as ue,D as ie,E as re,g as ce,r as M,F as de,aj as fe,G as ve,aS as ge,H as he,aT as me,w as R,aW as ye,aX as A,aY as Be,x as Te,aZ as xe,M as Pe,a_ as Se,T as be,e as Ce,a$ as ke,b0 as qe,B as Ee}from"./index-CHTpguR0.js";import{v as Oe,g as H,i as pe,j as we,k as Fe,p as Q,l as De,r as j,s as Me}from"./QItemLabel-BGAA-4EC.js";const Qe=P({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:l}){const u=s(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(o=>e[o]===!0).map(o=>`q-btn-group--${o}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:u.value},K(l.default))}}),je=P({name:"QSpace",setup(){const e=g("div",{class:"q-space"});return()=>e}}),Ke=P({name:"QMenu",inheritAttrs:!1,props:{...pe,...re,...ie,...ue,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:H},self:{type:String,validator:H},offset:{type:Array,validator:Oe},scrollTarget:le,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...se,"click","escapeKey"],setup(e,{slots:l,emit:u,attrs:i}){let o=null,v,c,h;const S=ce(),{proxy:m}=S,{$q:a}=m,n=M(null),r=M(!1),W=s(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),$=de(e,a),{registerTick:G,removeTick:L}=fe(),{registerTimeout:b}=ve(),{transitionProps:_,transitionStyle:I}=ge(e),{localScrollTarget:C,changeScrollEvent:U,unconfigureScrollTarget:X}=we(e,F),{anchorEl:d,canShow:Y}=Fe({showing:r}),{hide:k}=he({showing:r,canShow:Y,handleShow:V,handleHide:ee,hideOnRouteChange:W,processOnMount:!0}),{showPortal:q,hidePortal:E,renderPortal:Z}=me(S,n,oe,"menu"),y={anchorEl:d,innerRef:n,onClickOutside(t){if(e.persistent!==!0&&r.value===!0)return k(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&Ee(t),!0}},O=s(()=>Q(e.anchor||(e.cover===!0?"center middle":"bottom start"),a.lang.rtl)),z=s(()=>e.cover===!0?O.value:Q(e.self||"top start",a.lang.rtl)),J=s(()=>(e.square===!0?" q-menu--square":"")+($.value===!0?" q-menu--dark q-dark":"")),N=s(()=>e.autoClose===!0?{onClick:te}:{}),p=s(()=>r.value===!0&&e.persistent!==!0);R(p,t=>{t===!0?(ye(T),De(y)):(A(T),j(y))});function B(){ke(()=>{let t=n.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function V(t){if(o=e.noRefocus===!1?document.activeElement:null,Be(D),q(),F(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const x=Te(t);if(x.left!==void 0){const{top:ae,left:ne}=d.value.getBoundingClientRect();v={left:x.left-ne,top:x.top-ae}}}c===void 0&&(c=R(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,f)),e.noFocus!==!0&&document.activeElement.blur(),G(()=>{f(),e.noFocus!==!0&&B()}),b(()=>{a.platform.is.ios===!0&&(h=e.autoClose,n.value.click()),f(),q(!0),u("show",t)},e.transitionDuration)}function ee(t){L(),E(),w(!0),o!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t?.type.indexOf("key")===0?o.closest('[tabindex]:not([tabindex^="-"])'):void 0)||o).focus(),o=null),b(()=>{E(!0),u("hide",t)},e.transitionDuration)}function w(t){v=void 0,c!==void 0&&(c(),c=void 0),(t===!0||r.value===!0)&&(xe(D),X(),j(y),A(T)),t!==!0&&(o=null)}function F(){(d.value!==null||e.scrollTarget!==void 0)&&(C.value=Pe(d.value,e.scrollTarget),U(C.value,f))}function te(t){h!==!0?(Se(m,t),u("click",t)):h=!1}function D(t){p.value===!0&&e.noFocus!==!0&&qe(n.value,t.target)!==!0&&B()}function T(t){e.noEscDismiss!==!0&&(u("escapeKey"),k(t))}function f(){Me({targetEl:n.value,offset:e.offset,anchorEl:d.value,anchorOrigin:O.value,selfOrigin:z.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function oe(){return g(be,_.value,()=>r.value===!0?g("div",{role:"menu",...i,ref:n,tabindex:-1,class:["q-menu q-position-engine scroll"+J.value,i.class],style:[i.style,I.value],...N.value},K(l.default)):null)}return Ce(w),Object.assign(m,{focus:B,updatePosition:f}),Z}});let Re=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Re=e.scrollLeft>=0,e.remove()}export{Ke as Q,Qe as a,je as b,Re as r};
