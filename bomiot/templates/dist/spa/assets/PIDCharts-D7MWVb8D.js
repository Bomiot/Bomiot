import{Q as jt}from"./QPage-ndr1C9jp.js";import{e as Kt,g as Qt}from"./axios-CJC2MDvx.js";import{u as It}from"./use-quasar-CFfcHwN_.js";import{aK as _t,a as Me,r as bt,w as Jt,o as Mt,e as Tt,a2 as ea,a3 as Te,aI as Dt,ab as Ke,a7 as ta,as as Qe,ao as aa,a5 as ra}from"./index-Bv7wNieA.js";import{ba as ia,bb as Le,_ as Re,ag as z,ai as St,b8 as Vt,bc as Je,bd as At,be as na,ar as de,e as M,w as K,bf as Ct,X as Ee,h as F,m as Ne,aM as Ht,b as G,bg as ke,L as oa,N as sa,J as De,aH as Pe,bh as la,a_ as Se,bi as ua,H as ha,S as da,bj as et,G as fe,bk as fa,bl as va,bm as ca,al as pa,bn as ve,b2 as tt,o as ga,g as Ve,bo as ma,aA as se,bp as at,bq as ya,br as xa,bs as wa,C as Ia,bt as rt,bu as re,bv as it,bw as _a,bx as nt,k as ba,j as Ma,by as Ta,bz as Da,R as Sa,a0 as J,aa as ee,a$ as Va,b0 as me,bA as ye,bB as Lt,bC as Q,aF as Aa,bD as ot,bE as Ca,U as Ha,bF as st,z as La,A as Ra,B as Ea,D as Na,E as ka}from"./installCanvasRenderer-CfMBnVHW.js";var lt="\0_ec_interaction_mutex";function ut(a,t){return!!Pa(a)[t]}function Pa(a){return a[lt]||(a[lt]={})}ia({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Le);var za=function(a){Re(t,a);function t(e){var r=a.call(this)||this;r._zr=e;var i=z(r._mousedownHandler,r),n=z(r._mousemoveHandler,r),o=z(r._mouseupHandler,r),s=z(r._mousewheelHandler,r),u=z(r._pinchHandler,r);return r.enable=function(l,h){this.disable(),this._opt=St(Vt(h)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),l==null&&(l=!0),(l===!0||l==="move"||l==="pan")&&(e.on("mousedown",i),e.on("mousemove",n),e.on("mouseup",o)),(l===!0||l==="scale"||l==="zoom")&&(e.on("mousewheel",s),e.on("pinch",u))},r.disable=function(){e.off("mousedown",i),e.off("mousemove",n),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",u)},r}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!Je(e)){for(var r=e.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,i,n)&&(this._x=i,this._y=n,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!oe("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||ut(this._zr,"globalPan"))){var r=e.offsetX,i=e.offsetY,n=this._x,o=this._y,s=r-n,u=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&At(e.event),Rt(this,"pan","moveOnMouseMove",e,{dx:s,dy:u,oldX:n,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){Je(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var r=oe("zoomOnMouseWheel",e,this._opt),i=oe("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,o=Math.abs(n),s=e.offsetX,u=e.offsetY;if(!(n===0||!r&&!i)){if(r){var l=o>3?1.4:o>1?1.2:1.1,h=n>0?l:1/l;xe(this,"zoom","zoomOnMouseWheel",e,{scale:h,originX:s,originY:u,isAvailableBehavior:null})}if(i){var f=Math.abs(n),v=(n>0?1:-1)*(f>3?.4:f>1?.15:.05);xe(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:v,originX:s,originY:u,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!ut(this._zr,"globalPan")){var r=e.pinchScale>1?1.1:1/1.1;xe(this,"zoom",null,e,{scale:r,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t}(na);function xe(a,t,e,r,i){a.pointerChecker&&a.pointerChecker(r,i.originX,i.originY)&&(At(r.event),Rt(a,t,e,r,i))}function Rt(a,t,e,r,i){i.isAvailableBehavior=z(oe,null,e,r),a.trigger(t,i)}function oe(a,t,e){var r=e[a];return!a||r&&(!de(r)||t.event[r+"Key"])}var N=Ee();function Ba(a){var t=a.mainData,e=a.datas;e||(e={main:t},a.datasAttr={main:"data"}),a.datas=a.mainData=null,Et(t,e,a),M(e,function(r){M(t.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,K(Oa,a))})}),t.wrapMethod("cloneShallow",K(Ga,a)),M(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,K(Wa,a))}),Ct(e[t.dataType]===t)}function Oa(a,t){if(Fa(this)){var e=F({},N(this).datas);e[this.dataType]=t,Et(t,e,a)}else ze(t,this.dataType,N(this).mainData,a);return t}function Wa(a,t){return a.struct&&a.struct.update(),t}function Ga(a,t){return M(N(t).datas,function(e,r){e!==t&&ze(e.cloneShallow(),r,t,a)}),t}function Xa(a){var t=N(this).mainData;return a==null||t==null?t:N(t).datas[a]}function qa(){var a=N(this).mainData;return a==null?[{data:a}]:Ne(Ht(N(a).datas),function(t){return{type:t,data:N(a).datas[t]}})}function Fa(a){return N(a).mainData===a}function Et(a,t,e){N(a).datas={},M(t,function(r,i){ze(r,i,a,e)})}function ze(a,t,e,r){N(e).datas[t]=a,N(a).mainData=e,a.dataType=t,r.struct&&(a[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=a),a.getLinkedData=Xa,a.getLinkedDataAll=qa}var Ya=function(){function a(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(t,e,r){De(t)&&(r=e,e=t,t=null),t=t||{},de(t)&&(t={order:t});var i=t.order||"preorder",n=this[t.attr||"children"],o;i==="preorder"&&(o=e.call(r,this));for(var s=0;!o&&s<n.length;s++)n[s].eachNode(t,e,r);i==="postorder"&&e.call(r,this)},a.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},a.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,r=this.children,i=r.length;e<i;e++){var n=r[e].getNodeById(t);if(n)return n}},a.prototype.contains=function(t){if(t===this)return!0;for(var e=0,r=this.children,i=r.length;e<i;e++){var n=r[e].contains(t);if(n)return n}},a.prototype.getAncestors=function(t){for(var e=[],r=t?this:this.parentNode;r;)e.push(r),r=r.parentNode;return e.reverse(),e},a.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},a.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},a.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},a.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,r=e.data.getItemModel(this.dataIndex);return r.getModel(t)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},a.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},a.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},a.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},a}(),$a=function(){function a(t){this.type="tree",this._nodes=[],this.hostModel=t}return a.prototype.eachNode=function(t,e,r){this.root.eachNode(t,e,r)},a.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},a.prototype.getNodeById=function(t){return this.root.getNodeById(t)},a.prototype.update=function(){for(var t=this.data,e=this._nodes,r=0,i=e.length;r<i;r++)e[r].dataIndex=-1;for(var r=0,i=t.count();r<i;r++)e[t.getRawIndex(r)].dataIndex=r},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(t,e,r){var i=new a(e),n=[],o=1;s(t);function s(h,f){var v=h.value;o=Math.max(o,G(v)?v.length:1),n.push(h);var c=new Ya(ke(h.name,""),i);f?Ua(c,f):i.root=c,i._nodes.push(c);var g=h.children;if(g)for(var d=0;d<g.length;d++)s(g[d],c)}i.root.updateDepthAndHeight(0);var u=oa(n,{coordDimensions:["value"],dimensionsCount:o}).dimensions,l=new sa(u,e);return l.initData(n),r&&r(l),Ba({mainData:l,struct:i,structAttr:"tree"}),i.update(),i},a}();function Ua(a,t){var e=t.children;a.parentNode!==t&&(e.push(a),a.parentNode=t)}function Be(a,t,e){if(a&&Pe(t,a.type)>=0){var r=e.getData().tree.root,i=a.targetNode;if(de(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var n=a.targetNodeId;if(n!=null&&(i=r.getNodeById(n)))return{node:i}}}function Nt(a){for(var t=[];a;)a=a.parentNode,a&&t.push(a);return t.reverse()}function kt(a,t){var e=Nt(a);return Pe(e,t)>=0}function Pt(a,t){for(var e=[];a;){var r=a.dataIndex;e.push({name:a.name,dataIndex:r,value:t.getRawValue(r)}),a=a.parentNode}return e.reverse(),e}var ht=["treemapZoomToNode","treemapRender","treemapMove"];function Za(a){for(var t=0;t<ht.length;t++)a.registerAction({type:ht[t],update:"updateView"},Le);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,r){r.eachComponent({mainType:"series",subType:"treemap",query:e},i);function i(n,o){var s=["treemapZoomToNode","treemapRootToNode"],u=Be(e,s,n);if(u){var l=n.getViewRoot();l&&(e.direction=kt(l,u.node)?"rollUp":"drillDown"),n.resetViewRoot(u.node)}}})}function ja(a){var t=a.getData(),e=t.tree,r={};e.eachNode(function(i){for(var n=i;n&&n.depth>1;)n=n.parentNode;var o=la(a.ecModel,n.name||n.dataIndex+"",r);i.setVisual("decal",o)})}var Ka=function(a){Re(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return t.prototype.getInitialData=function(e,r){var i={name:e.name,children:e.data};zt(i);var n=e.levels||[],o=this.designatedVisualItemStyle={},s=new Se({itemStyle:o},this,r);n=e.levels=Qa(n,r);var u=Ne(n||[],function(f){return new Se(f,s,r)},this),l=$a.createTree(i,this,h);function h(f){f.wrapMethod("getItemModel",function(v,c){var g=l.getNodeByDataIndex(c),d=g?u[g.depth]:null;return v.parentModel=d||s,v})}return l.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,r,i){var n=this.getData(),o=this.getRawValue(e),s=n.getName(e);return ua("nameValue",{name:s,value:o})},t.prototype.getDataParams=function(e){var r=a.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=Pt(i,this),r.treePathInfo=r.treeAncestors,r},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},F(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var r=this._idIndexMap;r||(r=this._idIndexMap=ha(),this._idIndexMapCount=0);var i=r.get(e);return i==null&&r.set(e,i=this._idIndexMapCount++),i},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var r=this.getRawData().tree.root;(!e||e!==r&&!r.contains(e))&&(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){ja(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"â–¶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(da);function zt(a){var t=0;M(a.children,function(r){zt(r);var i=r.value;G(i)&&(i=i[0]),t+=i});var e=a.value;G(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),G(a.value)?a.value[0]=e:a.value=e}function Qa(a,t){var e=et(t.get("color")),r=et(t.get(["aria","decal","decals"]));if(e){a=a||[];var i,n;M(a,function(s){var u=new Se(s),l=u.get("color"),h=u.get("decal");(u.get(["itemStyle","color"])||l&&l!=="none")&&(i=!0),(u.get(["itemStyle","decal"])||h&&h!=="none")&&(n=!0)});var o=a[0]||(a[0]={});return i||(o.color=e.slice()),!n&&r&&(o.decal=r.slice()),a}}var Ja=8,dt=8,we=5,er=function(){function a(t){this.group=new fe,t.add(this.group)}return a.prototype.render=function(t,e,r,i){var n=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!n.get("show")||!r)){var s=n.getModel("itemStyle"),u=n.getModel("emphasis"),l=s.getModel("textStyle"),h=u.getModel(["itemStyle","textStyle"]),f={pos:{left:n.get("left"),right:n.get("right"),top:n.get("top"),bottom:n.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:n.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,f,l),this._renderContent(t,f,s,u,l,h,i),fa(o,f.pos,f.box)}},a.prototype._prepare=function(t,e,r){for(var i=t;i;i=i.parentNode){var n=ke(i.getModel().get("name"),""),o=r.getTextRect(n),s=Math.max(o.width+Ja*2,e.emptyItemWidth);e.totalWidth+=s+dt,e.renderList.push({node:i,text:n,width:s})}},a.prototype._renderContent=function(t,e,r,i,n,o,s){for(var u=0,l=e.emptyItemWidth,h=t.get(["breadcrumb","height"]),f=va(e.pos,e.box),v=e.totalWidth,c=e.renderList,g=i.getModel("itemStyle").getItemStyle(),d=c.length-1;d>=0;d--){var p=c[d],w=p.node,m=p.width,y=p.text;v>f.width&&(v-=m-l,m=l,y=null);var I=new ca({shape:{points:tr(u,0,m,h,d===c.length-1,d===0)},style:St(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new pa({style:tt(n,{text:y})}),textConfig:{position:"inside"},z2:ve*1e4,onclick:K(s,w)});I.disableLabelAnimation=!0,I.getTextContent().ensureState("emphasis").style=tt(o,{text:y}),I.ensureState("emphasis").style=g,ga(I,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(I),ar(I,t,w),u+=m+dt}},a.prototype.remove=function(){this.group.removeAll()},a}();function tr(a,t,e,r,i,n){var o=[[i?a:a-we,t],[a+e,t],[a+e,t+r],[i?a:a-we,t+r]];return!n&&o.splice(2,0,[a+e+we,t+r/2]),!i&&o.push([a,t+r/2]),o}function ar(a,t,e){Ve(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Pt(e,t)}}var rr=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(t,e,r,i,n){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:r,delay:i,easing:n}),!0)},a.prototype.finished=function(t){return this._finishedCallback=t,this},a.prototype.start=function(){for(var t=this,e=this._storage.length,r=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},i=0,n=this._storage.length;i<n;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},a}();function ir(){return new rr}var Ae=fe,ft=Sa,vt=3,ct="label",pt="upperLabel",nr=ve*10,or=ve*2,sr=ve*3,X=_a([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),gt=function(a){var t=X(a);return t.stroke=t.fill=t.lineWidth=null,t},le=Ee(),lr=function(a){Re(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage=U(),e}return t.prototype.render=function(e,r,i,n){var o=r.findComponents({mainType:"series",subType:"treemap",query:n});if(!(Pe(o,e)<0)){this.seriesModel=e,this.api=i,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],u=Be(n,s,e),l=n&&n.type,h=e.layoutInfo,f=!this._oldTree,v=this._storage,c=l==="treemapRootToNode"&&u&&v?{rootNodeGroup:v.nodeGroup[u.node.getRawIndex()],direction:n.direction}:null,g=this._giveContainerGroup(h),d=e.get("animation"),p=this._doRender(g,e,c);d&&!f&&(!l||l==="treemapZoomToNode"||l==="treemapRootToNode")?this._doAnimation(g,p,e,c):p.renderFinally(),this._resetController(i),this._renderBreadcrumb(e,i,u)}},t.prototype._giveContainerGroup=function(e){var r=this._containerGroup;return r||(r=this._containerGroup=new Ae,this._initEvents(r),this.group.add(r)),r.x=e.x,r.y=e.y,r},t.prototype._doRender=function(e,r,i){var n=r.getData().tree,o=this._oldTree,s=U(),u=U(),l=this._storage,h=[];function f(m,y,I,A){return ur(r,u,l,i,s,h,m,y,I,A)}d(n.root?[n.root]:[],o&&o.root?[o.root]:[],e,n===o||!o,0);var v=p(l);if(this._oldTree=n,this._storage=u,this._controllerHost){var c=this.seriesModel.layoutInfo,g=n.root.getLayout();g.width===c.width&&g.height===c.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:v,renderFinally:w};function d(m,y,I,A,E){A?(y=m,M(m,function(B,W){!B.isRemoved()&&H(W,W)})):new ma(y,m,C,C).add(H).update(H).remove(K(H,null)).execute();function C(B){return B.getId()}function H(B,W){var T=B!=null?m[B]:null,L=W!=null?y[W]:null,Y=f(T,L,I,E);Y&&d(T&&T.viewChildren||[],L&&L.viewChildren||[],Y,A,E+1)}}function p(m){var y=U();return m&&M(m,function(I,A){var E=y[A];M(I,function(C){C&&(E.push(C),le(C).willDelete=!0)})}),y}function w(){M(v,function(m){M(m,function(y){y.parent&&y.parent.remove(y)})}),M(h,function(m){m.invisible=!0,m.dirty()})}},t.prototype._doAnimation=function(e,r,i,n){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),u=(De(o)?0:o)||0,l=(De(s)?null:s)||"cubicOut",h=ir();M(r.willDeleteEls,function(f,v){M(f,function(c,g){if(!c.invisible){var d=c.parent,p,w=le(d);if(n&&n.direction==="drillDown")p=d===n.rootNodeGroup?{shape:{x:0,y:0,width:w.nodeWidth,height:w.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var m=0,y=0;w.willDelete||(m=w.nodeWidth/2,y=w.nodeHeight/2),p=v==="nodeGroup"?{x:m,y,style:{opacity:0}}:{shape:{x:m,y,width:0,height:0},style:{opacity:0}}}p&&h.add(c,p,u,0,l)}})}),M(this._storage,function(f,v){M(f,function(c,g){var d=r.lastsForAnimation[v][g],p={};d&&(c instanceof fe?d.oldX!=null&&(p.x=c.x,p.y=c.y,c.x=d.oldX,c.y=d.oldY):(d.oldShape&&(p.shape=F({},c.shape),c.setShape(d.oldShape)),d.fadein?(c.setStyle("opacity",0),p.style={opacity:1}):c.style.opacity!==1&&(p.style={opacity:1})),h.add(c,p,u,0,l))})},this),this._state="animating",h.finished(z(function(){this._state="ready",r.renderFinally()},this)).start()},t.prototype._resetController=function(e){var r=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),r||(r=this._controller=new za(e.getZr()),r.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",z(this._onPan,this)),r.on("zoom",z(this._onZoom,this)));var n=new se(0,0,e.getWidth(),e.getHeight());r.setPointerChecker(function(o,s,u){return n.contain(s,u)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>vt||Math.abs(e.dy)>vt)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+e.dx,y:i.y+e.dy,width:i.width,height:i.height}})}},t.prototype._onZoom=function(e){var r=e.originX,i=e.originY,n=e.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var u=new se(s.x,s.y,s.width,s.height),l=null,h=this._controllerHost;l=h.zoomLimit;var f=h.zoom=h.zoom||1;if(f*=n,l){var v=l.min||0,c=l.max||1/0;f=Math.max(Math.min(c,f),v)}var g=f/h.zoom;h.zoom=f;var d=this.seriesModel.layoutInfo;r-=d.x,i-=d.y;var p=ya();at(p,p,[-r,-i]),xa(p,p,[g,g]),at(p,p,[r,i]),u.applyTransform(p),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x,y:u.y,width:u.width,height:u.height}})}},t.prototype._initEvents=function(e){var r=this;e.on("click",function(i){if(r._state==="ready"){var n=r.seriesModel.get("nodeClick",!0);if(n){var o=r.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(n==="zoomToNode")r._zoomToNode(o);else if(n==="link"){var u=s.hostTree.data.getItemModel(s.dataIndex),l=u.get("link",!0),h=u.get("target",!0)||"blank";l&&wa(l,h)}}}}},this)},t.prototype._renderBreadcrumb=function(e,r,i){var n=this;i||(i=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new er(this.group))).render(e,r,i.node,function(o){n._state!=="animating"&&(kt(e.getViewRoot(),o)?n._rootToNode({node:o}):n._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=U(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,r){var i,n=this.seriesModel.getViewRoot();return n.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var u=s.transformCoordToLocal(e,r),l=s.shape;if(l.x<=u[0]&&u[0]<=l.x+l.width&&l.y<=u[1]&&u[1]<=l.y+l.height)i={node:o,offsetX:u[0],offsetY:u[1]};else return!1}},this),i},t.type="treemap",t}(Ia);function U(){return{nodeGroup:[],background:[],content:[]}}function ur(a,t,e,r,i,n,o,s,u,l){if(!o)return;var h=o.getLayout(),f=a.getData(),v=o.getModel();if(f.setItemGraphicEl(o.dataIndex,null),!h||!h.isInView)return;var c=h.width,g=h.height,d=h.borderWidth,p=h.invisible,w=o.getRawIndex(),m=s&&s.getRawIndex(),y=o.viewChildren,I=h.upperHeight,A=y&&y.length,E=v.getModel("itemStyle"),C=v.getModel(["emphasis","itemStyle"]),H=v.getModel(["blur","itemStyle"]),B=v.getModel(["select","itemStyle"]),W=E.get("borderRadius")||0,T=ge("nodeGroup",Ae);if(!T)return;if(u.add(T),T.x=h.x||0,T.y=h.y||0,T.markRedraw(),le(T).nodeWidth=c,le(T).nodeHeight=g,h.isAboveViewRoot)return T;var L=ge("background",ft,l,or);L&&Yt(T,L,A&&h.upperLabelHeight);var Y=v.getModel("emphasis"),ce=Y.get("focus"),Ge=Y.get("blurScope"),Xe=Y.get("disabled"),qe=ce==="ancestor"?o.getAncestorsIndices():ce==="descendant"?o.getDescendantIndices():ce;if(A)rt(T)&&re(T,!1),L&&(re(L,!Xe),f.setItemGraphicEl(o.dataIndex,L),it(L,qe,Ge));else{var pe=ge("content",ft,l,sr);pe&&$t(T,pe),L.disableMorphing=!0,L&&rt(L)&&re(L,!1),re(T,!Xe),f.setItemGraphicEl(o.dataIndex,T);var Fe=v.getShallow("cursor");Fe&&pe.attr("cursor",Fe),it(T,qe,Ge)}return T;function Yt(_,x,S){var b=Ve(x);if(b.dataIndex=o.dataIndex,b.seriesIndex=a.seriesIndex,x.setShape({x:0,y:0,width:c,height:g,r:W}),p)Ye(x);else{x.invisible=!1;var D=o.getVisual("style"),R=D.stroke,k=gt(E);k.fill=R;var V=X(C);V.fill=C.get("borderColor");var P=X(H);P.fill=H.get("borderColor");var O=X(B);if(O.fill=B.get("borderColor"),S){var $=c-2*d;$e(x,R,D.opacity,{x:d,y:0,width:$,height:I})}else x.removeTextContent();x.setStyle(k),x.ensureState("emphasis").style=V,x.ensureState("blur").style=P,x.ensureState("select").style=O,nt(x)}_.add(x)}function $t(_,x){var S=Ve(x);S.dataIndex=o.dataIndex,S.seriesIndex=a.seriesIndex;var b=Math.max(c-2*d,0),D=Math.max(g-2*d,0);if(x.culling=!0,x.setShape({x:d,y:d,width:b,height:D,r:W}),p)Ye(x);else{x.invisible=!1;var R=o.getVisual("style"),k=R.fill,V=gt(E);V.fill=k,V.decal=R.decal;var P=X(C),O=X(H),$=X(B);$e(x,k,R.opacity,null),x.setStyle(V),x.ensureState("emphasis").style=P,x.ensureState("blur").style=O,x.ensureState("select").style=$,nt(x)}_.add(x)}function Ye(_){!_.invisible&&n.push(_)}function $e(_,x,S,b){var D=v.getModel(b?pt:ct),R=ke(v.get("name"),null),k=D.getShallow("show");ba(_,Ma(v,b?pt:ct),{defaultText:k?R:null,inheritColor:x,defaultOpacity:S,labelFetcher:a,labelDataIndex:o.dataIndex});var V=_.getTextContent();if(V){var P=V.style,O=Ta(P.padding||0);b&&(_.setTextConfig({layoutRect:b}),V.disableLabelLayout=!0),V.beforeUpdate=function(){var Ze=Math.max((b?b.width:_.shape.width)-O[1]-O[3],0),je=Math.max((b?b.height:_.shape.height)-O[0]-O[2],0);(P.width!==Ze||P.height!==je)&&V.setStyle({width:Ze,height:je})},P.truncateMinChar=2,P.lineOverflow="truncate",Ue(P,b,h);var $=V.getState("emphasis");Ue($?$.style:null,b,h)}}function Ue(_,x,S){var b=_?_.text:null;if(!x&&S.isLeafRoot&&b!=null){var D=a.get("drillDownIcon",!0);_.text=D?D+" "+b:b}}function ge(_,x,S,b){var D=m!=null&&e[_][m],R=i[_];return D?(e[_][m]=null,Ut(R,D)):p||(D=new x,D instanceof Da&&(D.z2=hr(S,b)),Zt(R,D)),t[_][w]=D}function Ut(_,x){var S=_[w]={};x instanceof Ae?(S.oldX=x.x,S.oldY=x.y):S.oldShape=F({},x.shape)}function Zt(_,x){var S=_[w]={},b=o.parentNode,D=x instanceof fe;if(b&&(!r||r.direction==="drillDown")){var R=0,k=0,V=i.background[b.getRawIndex()];!r&&V&&V.oldShape&&(R=V.oldShape.width,k=V.oldShape.height),D?(S.oldX=0,S.oldY=k):S.oldShape={x:R,y:k,width:0,height:0}}S.fadein=!D}}function hr(a,t){return a*nr+t}var te=M,dr=ee,ue=-1,Oe=function(){function a(t){var e=t.mappingMethod,r=t.type,i=this.option=Vt(t);this.type=r,this.mappingMethod=e,this._normalizeData=cr[e];var n=a.visualHandlers[r];this.applyVisual=n.applyVisual,this.getColorMapper=n.getColorMapper,this._normalizedToVisual=n._normalizedToVisual[e],e==="piecewise"?(Ie(i),fr(i)):e==="category"?i.categories?vr(i):Ie(i,!0):(Ct(e!=="linear"||i.dataExtent),Ie(i))}return a.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},a.prototype.getNormalizer=function(){return z(this._normalizeData,this)},a.listVisualTypes=function(){return Ht(a.visualHandlers)},a.isValidType=function(t){return a.visualHandlers.hasOwnProperty(t)},a.eachVisual=function(t,e,r){ee(t)?M(t,e,r):e.call(r,t)},a.mapVisual=function(t,e,r){var i,n=G(t)?[]:ee(t)?{}:(i=!0,null);return a.eachVisual(t,function(o,s){var u=e.call(r,o,s);i?n=u:n[s]=u}),n},a.retrieveVisuals=function(t){var e={},r;return t&&te(a.visualHandlers,function(i,n){t.hasOwnProperty(n)&&(e[n]=t[n],r=!0)}),r?e:null},a.prepareVisualTypes=function(t){if(G(t))t=t.slice();else if(dr(t)){var e=[];te(t,function(r,i){e.push(i)}),t=e}else return[];return t.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),t},a.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e},a.findPieceIndex=function(t,e,r){for(var i,n=1/0,o=0,s=e.length;o<s;o++){var u=e[o].value;if(u!=null){if(u===t||de(u)&&u===t+"")return o;r&&v(u,o)}}for(var o=0,s=e.length;o<s;o++){var l=e[o],h=l.interval,f=l.close;if(h){if(h[0]===-1/0){if(ne(f[1],t,h[1]))return o}else if(h[1]===1/0){if(ne(f[0],h[0],t))return o}else if(ne(f[0],h[0],t)&&ne(f[1],t,h[1]))return o;r&&v(h[0],o),r&&v(h[1],o)}}if(r)return t===1/0?e.length-1:t===-1/0?0:i;function v(c,g){var d=Math.abs(c-t);d<n&&(n=d,i=g)}},a.visualHandlers={color:{applyVisual:Z("color"),getColorMapper:function(){var t=this.option;return z(t.mappingMethod==="category"?function(e,r){return!r&&(e=this._normalizeData(e)),j.call(this,e)}:function(e,r,i){var n=!!i;return!r&&(e=this._normalizeData(e)),i=ye(e,t.parsedVisual,i),n?i:me(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return me(ye(t,this.option.parsedVisual),"rgba")},category:j,piecewise:function(t,e){var r=He.call(this,e);return r==null&&(r=me(ye(t,this.option.parsedVisual),"rgba")),r},fixed:q}},colorHue:ie(function(t,e){return Q(t,e)}),colorSaturation:ie(function(t,e){return Q(t,null,e)}),colorLightness:ie(function(t,e){return Q(t,null,null,e)}),colorAlpha:ie(function(t,e){return Lt(t,e)}),decal:{applyVisual:Z("decal"),_normalizedToVisual:{linear:null,category:j,piecewise:null,fixed:null}},opacity:{applyVisual:Z("opacity"),_normalizedToVisual:Ce([0,1])},liftZ:{applyVisual:Z("liftZ"),_normalizedToVisual:{linear:q,category:q,piecewise:q,fixed:q}},symbol:{applyVisual:function(t,e,r){var i=this.mapValueToVisual(t);r("symbol",i)},_normalizedToVisual:{linear:mt,category:j,piecewise:function(t,e){var r=He.call(this,e);return r==null&&(r=mt.call(this,t)),r},fixed:q}},symbolSize:{applyVisual:Z("symbolSize"),_normalizedToVisual:Ce([0,1])}},a}();function fr(a){var t=a.pieceList;a.hasSpecialVisual=!1,M(t,function(e,r){e.originIndex=r,e.visual!=null&&(a.hasSpecialVisual=!0)})}function vr(a){var t=a.categories,e=a.categoryMap={},r=a.visual;if(te(t,function(o,s){e[o]=s}),!G(r)){var i=[];ee(r)?te(r,function(o,s){var u=e[s];i[u??ue]=o}):i[ue]=r,r=Bt(a,i)}for(var n=t.length-1;n>=0;n--)r[n]==null&&(delete e[t[n]],t.pop())}function Ie(a,t){var e=a.visual,r=[];ee(e)?te(e,function(n){r.push(n)}):e!=null&&r.push(e);var i={color:1,symbol:1};!t&&r.length===1&&!i.hasOwnProperty(a.type)&&(r[1]=r[0]),Bt(a,r)}function ie(a){return{applyVisual:function(t,e,r){var i=this.mapValueToVisual(t);r("color",a(e("color"),i))},_normalizedToVisual:Ce([0,1])}}function mt(a){var t=this.option.visual;return t[Math.round(J(a,[0,1],[0,t.length-1],!0))]||{}}function Z(a){return function(t,e,r){r(a,this.mapValueToVisual(t))}}function j(a){var t=this.option.visual;return t[this.option.loop&&a!==ue?a%t.length:a]}function q(){return this.option.visual[0]}function Ce(a){return{linear:function(t){return J(t,a,this.option.visual,!0)},category:j,piecewise:function(t,e){var r=He.call(this,e);return r==null&&(r=J(t,a,this.option.visual,!0)),r},fixed:q}}function He(a){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var r=Oe.findPieceIndex(a,e),i=e[r];if(i&&i.visual)return i.visual[this.type]}}function Bt(a,t){return a.visual=t,a.type==="color"&&(a.parsedVisual=Ne(t,function(e){var r=Va(e);return r||[0,0,0,1]})),t}var cr={linear:function(a){return J(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var t=this.option.pieceList,e=Oe.findPieceIndex(a,t,!0);if(e!=null)return J(e,[0,t.length-1],[0,1],!0)},category:function(a){var t=this.option.categories?this.option.categoryMap[a]:a;return t??ue},fixed:Le};function ne(a,t,e){return a?t<=e:t<e}var pr="itemStyle",Ot=Ee();const gr={seriesType:"treemap",reset:function(a){var t=a.getData().tree,e=t.root;e.isRemoved()||Wt(e,{},a.getViewRoot().getAncestors(),a)}};function Wt(a,t,e,r){var i=a.getModel(),n=a.getLayout(),o=a.hostTree.data;if(!(!n||n.invisible||!n.isInView)){var s=i.getModel(pr),u=mr(s,t,r),l=o.ensureUniqueItemVisual(a.dataIndex,"style"),h=s.get("borderColor"),f=s.get("borderColorSaturation"),v;f!=null&&(v=yt(u),h=yr(f,v)),l.stroke=h;var c=a.viewChildren;if(!c||!c.length)v=yt(u),l.fill=v;else{var g=xr(a,i,n,s,u,c);M(c,function(d,p){if(d.depth>=e.length||d===e[d.depth]){var w=wr(i,u,d,p,g,r);Wt(d,w,e,r)}})}}}function mr(a,t,e){var r=F({},t),i=e.designatedVisualItemStyle;return M(["color","colorAlpha","colorSaturation"],function(n){i[n]=t[n];var o=a.get(n);i[n]=null,o!=null&&(r[n]=o)}),r}function yt(a){var t=_e(a,"color");if(t){var e=_e(a,"colorAlpha"),r=_e(a,"colorSaturation");return r&&(t=Q(t,null,null,r)),e&&(t=Lt(t,e)),t}}function yr(a,t){return t!=null?Q(t,null,null,a):null}function _e(a,t){var e=a[t];if(e!=null&&e!=="none")return e}function xr(a,t,e,r,i,n){if(!(!n||!n.length)){var o=be(t,"color")||i.color!=null&&i.color!=="none"&&(be(t,"colorAlpha")||be(t,"colorSaturation"));if(o){var s=t.get("visualMin"),u=t.get("visualMax"),l=e.dataExtent.slice();s!=null&&s<l[0]&&(l[0]=s),u!=null&&u>l[1]&&(l[1]=u);var h=t.get("colorMappingBy"),f={type:o.name,dataExtent:l,visual:o.range};f.type==="color"&&(h==="index"||h==="id")?(f.mappingMethod="category",f.loop=!0):f.mappingMethod="linear";var v=new Oe(f);return Ot(v).drColorMappingBy=h,v}}}function be(a,t){var e=a.get(t);return G(e)&&e.length?{name:t,range:e}:null}function wr(a,t,e,r,i,n){var o=F({},t);if(i){var s=i.type,u=s==="color"&&Ot(i).drColorMappingBy,l=u==="index"?r:u==="id"?n.mapIdToIndex(e.getId()):e.getValue(a.get("visualDimension"));o[s]=i.mapValueToVisual(l)}return o}var ae=Math.max,he=Math.min,xt=Ca,We=M,Gt=["itemStyle","borderWidth"],Ir=["itemStyle","gapWidth"],_r=["upperLabel","show"],br=["upperLabel","height"];const Mr={seriesType:"treemap",reset:function(a,t,e,r){var i=e.getWidth(),n=e.getHeight(),o=a.option,s=Aa(a.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),u=o.size||[],l=ot(xt(s.width,u[0]),i),h=ot(xt(s.height,u[1]),n),f=r&&r.type,v=["treemapZoomToNode","treemapRootToNode"],c=Be(r,v,a),g=f==="treemapRender"||f==="treemapMove"?r.rootRect:null,d=a.getViewRoot(),p=Nt(d);if(f!=="treemapMove"){var w=f==="treemapZoomToNode"?Cr(a,c,d,l,h):g?[g.width,g.height]:[l,h],m=o.sort;m&&m!=="asc"&&m!=="desc"&&(m="desc");var y={squareRatio:o.squareRatio,sort:m,leafDepth:o.leafDepth};d.hostTree.clearLayouts();var I={x:0,y:0,width:w[0],height:w[1],area:w[0]*w[1]};d.setLayout(I),Xt(d,y,!1,0),I=d.getLayout(),We(p,function(E,C){var H=(p[C+1]||d).getValue();E.setLayout(F({dataExtent:[H,H],borderWidth:0,upperHeight:0},I))})}var A=a.getData().tree.root;A.setLayout(Hr(s,g,c),!0),a.setLayoutInfo(s),qt(A,new se(-s.x,-s.y,i,n),p,d,0)}};function Xt(a,t,e,r){var i,n;if(!a.isRemoved()){var o=a.getLayout();i=o.width,n=o.height;var s=a.getModel(),u=s.get(Gt),l=s.get(Ir)/2,h=Ft(s),f=Math.max(u,h),v=u-l,c=f-l;a.setLayout({borderWidth:u,upperHeight:f,upperLabelHeight:h},!0),i=ae(i-2*v,0),n=ae(n-v-c,0);var g=i*n,d=Tr(a,s,g,t,e,r);if(d.length){var p={x:v,y:c,width:i,height:n},w=he(i,n),m=1/0,y=[];y.area=0;for(var I=0,A=d.length;I<A;){var E=d[I];y.push(E),y.area+=E.getLayout().area;var C=Ar(y,w,t.squareRatio);C<=m?(I++,m=C):(y.area-=y.pop().getLayout().area,wt(y,w,p,l,!1),w=he(p.width,p.height),y.length=y.area=0,m=1/0)}if(y.length&&wt(y,w,p,l,!0),!e){var H=s.get("childrenVisibleMin");H!=null&&g<H&&(e=!0)}for(var I=0,A=d.length;I<A;I++)Xt(d[I],t,e,r+1)}}}function Tr(a,t,e,r,i,n){var o=a.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var u=r.leafDepth!=null&&r.leafDepth<=n;if(i&&!u)return a.viewChildren=[];o=Ha(o,function(c){return!c.isRemoved()}),Sr(o,s);var l=Vr(t,o,s);if(l.sum===0)return a.viewChildren=[];if(l.sum=Dr(t,e,l.sum,s,o),l.sum===0)return a.viewChildren=[];for(var h=0,f=o.length;h<f;h++){var v=o[h].getValue()/l.sum*e;o[h].setLayout({area:v})}return u&&(o.length&&a.setLayout({isLeafRoot:!0},!0),o.length=0),a.viewChildren=o,a.setLayout({dataExtent:l.dataExtent},!0),o}function Dr(a,t,e,r,i){if(!r)return e;for(var n=a.get("visibleMin"),o=i.length,s=o,u=o-1;u>=0;u--){var l=i[r==="asc"?o-u-1:u].getValue();l/e*t<n&&(s=u,e-=l)}return r==="asc"?i.splice(0,o-s):i.splice(s,o-s),e}function Sr(a,t){return t&&a.sort(function(e,r){var i=t==="asc"?e.getValue()-r.getValue():r.getValue()-e.getValue();return i===0?t==="asc"?e.dataIndex-r.dataIndex:r.dataIndex-e.dataIndex:i}),a}function Vr(a,t,e){for(var r=0,i=0,n=t.length;i<n;i++)r+=t[i].getValue();var o=a.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:o==="value"&&e?(s=[t[t.length-1].getValue(),t[0].getValue()],e==="asc"&&s.reverse()):(s=[1/0,-1/0],We(t,function(u){var l=u.getValue(o);l<s[0]&&(s[0]=l),l>s[1]&&(s[1]=l)})),{sum:r,dataExtent:s}}function Ar(a,t,e){for(var r=0,i=1/0,n=0,o=void 0,s=a.length;n<s;n++)o=a[n].getLayout().area,o&&(o<i&&(i=o),o>r&&(r=o));var u=a.area*a.area,l=t*t*e;return u?ae(l*r/u,u/(l*i)):1/0}function wt(a,t,e,r,i){var n=t===e.width?0:1,o=1-n,s=["x","y"],u=["width","height"],l=e[s[n]],h=t?a.area/t:0;(i||h>e[u[o]])&&(h=e[u[o]]);for(var f=0,v=a.length;f<v;f++){var c=a[f],g={},d=h?c.getLayout().area/h:0,p=g[u[o]]=ae(h-2*r,0),w=e[s[n]]+e[u[n]]-l,m=f===v-1||w<d?w:d,y=g[u[n]]=ae(m-2*r,0);g[s[o]]=e[s[o]]+he(r,p/2),g[s[n]]=l+he(r,y/2),l+=m,c.setLayout(g,!0)}e[s[o]]+=h,e[u[o]]-=h}function Cr(a,t,e,r,i){var n=(t||{}).node,o=[r,i];if(!n||n===e)return o;for(var s,u=r*i,l=u*a.option.zoomToNodeRatio;s=n.parentNode;){for(var h=0,f=s.children,v=0,c=f.length;v<c;v++)h+=f[v].getValue();var g=n.getValue();if(g===0)return o;l*=h/g;var d=s.getModel(),p=d.get(Gt),w=Math.max(p,Ft(d));l+=4*p*p+(3*p+w)*Math.pow(l,.5),l>st&&(l=st),n=s}l<u&&(l=u);var m=Math.pow(l/u,.5);return[r*m,i*m]}function Hr(a,t,e){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!e)return r;var i=e.node,n=i.getLayout();if(!n)return r;for(var o=[n.width/2,n.height/2],s=i;s;){var u=s.getLayout();o[0]+=u.x,o[1]+=u.y,s=s.parentNode}return{x:a.width/2-o[0],y:a.height/2-o[1]}}function qt(a,t,e,r,i){var n=a.getLayout(),o=e[i],s=o&&o===a;if(!(o&&!s||i===e.length&&a!==r)){a.setLayout({isInView:!0,invisible:!s&&!t.intersect(n),isAboveViewRoot:s},!0);var u=new se(t.x-n.x,t.y-n.y,t.width,t.height);We(a.viewChildren||[],function(l){qt(l,u,e,r,i+1)})}}function Ft(a){return a.get(_r)?a.get(br):0}function Lr(a){a.registerSeriesModel(Ka),a.registerChartView(lr),a.registerVisual(gr),a.registerLayout(Mr),Za(a)}const Rr={__name:"TreeMap",props:{title:{type:String,default:"Treemap Chart"},seriesData:{type:Array,required:!0},chartHeight:{type:Number,required:!0}},setup(a){La([Lr,Ea,Na,ka]);const t=a,e=It(),r=Me(()=>e.dark.isActive),i=bt(null);let n=null;const o=()=>{if(!i.value)return;n||(n=Ra(i.value));const u={title:{text:t.title,left:"center",textStyle:{color:r.value?"#ffffff":"#000000"}},tooltip:{formatter:l=>{const h=l.value||0;return`${l.name}: ${h}`}},series:[{type:"treemap",data:t.seriesData,label:{show:!0,formatter:"{b}",color:r.value?"#ffffff":"#000000"},itemStyle:{borderColor:r.value?"#ffffff":"#000000",borderWidth:1}}]};n.setOption(u)};Jt(()=>[t.seriesData,r.value],()=>{o()},{deep:!0}),Mt(()=>{o(),window.addEventListener("resize",s)}),Tt(()=>{n&&(n.dispose(),n=null),window.removeEventListener("resize",s)});const s=()=>{n&&n.resize()};return(u,l)=>(Te(),ea("div",{ref_key:"chart",ref:i,style:Dt({width:"100%",height:`${a.chartHeight}px`})},null,4))}},Er=_t(Rr,[["__scopeId","data-v-95d517ca"]]),Nr={class:"col-12 q-pa-md"},kr={__name:"PIDCharts",setup(a){const t=It(),e=Me(()=>t.screen.height*.8),r=Me(()=>t.screen.width*.825),i=e.value;let n=null;const o=bt({title:"",series_list:[]});function s(){Qt({url:"core/server/pidcharts/"}).then(l=>{o.value=l.pid_data}).catch(l=>{t.notify({type:"error",message:l}),t.loading.hide()})}Mt(()=>{u(),s(),n=setInterval(()=>{s()},6e4)}),Tt(()=>{n&&clearInterval(n)});function u(){Kt.on("needLogin",l=>{l&&console.log("needLogin")})}return(l,h)=>(Te(),Ke(jt,{class:"flex flex-col q-pa-md"},{default:ta(()=>[Qe("div",{class:"row full-width",style:Dt({height:`${e.value}px`})},[Qe("div",Nr,[o.value.series_list.length?(Te(),Ke(Er,{key:0,title:o.value.title,"series-data":o.value.series_list,"show-legend":!0,"chart-height":ra(i),"chart-width":r.value},null,8,["title","series-data","chart-height","chart-width"])):aa("",!0)])],4)]),_:1}))}},Gr=_t(kr,[["__scopeId","data-v-8334edd3"]]);export{Gr as default};
