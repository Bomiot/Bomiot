import{Q as V}from"./QPage-Cbwj6EO4.js";import{e as M,g as R}from"./axios-2C-KJX3t.js";import{u as T}from"./language-h3alFOcN.js";import{u as S}from"./use-quasar-f8m-PZpx.js";import{aK as L,a as w,r as v,w as k,o as b,e as D,a2 as d,a3 as q,aI as A,ab as m,a7 as W,at as x,a5 as g,ao as y}from"./index-DC_W_xoa.js";import{aR as z,dR as I,dS as B,dQ as C,dT as E}from"./install-DogX_3Yh.js";import{n as O,o as H,q as N}from"./install-BzJmHx0b.js";import{L as P}from"./LineCharts-DyxANLmw.js";import{i as F}from"./install-BDOw-C_f.js";const G={__name:"StackedLine",props:{title:{type:String,default:"Stacked Line Chart"},xAxisData:{type:Array,required:!0},seriesData:{type:Array,required:!0},chartWidth:{type:Number,required:!0},chartHeight:{type:Number,required:!0}},setup(h){z([O,H,I,B,N,C]);const a=h,p=S(),t=w(()=>p.dark.isActive),s=v(null);let e=null;const f=()=>{if(!s.value)return;e||(e=E(s.value));const n={title:{text:a.title,left:"center",textStyle:{color:t.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis"},legend:{top:"10%",textStyle:{color:t.value?"#ffffff":"#000000"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.xAxisData,axisLine:{lineStyle:{color:t.value?"#ffffff":"#000000"},axisLabel:{color:t.value?"#ffffff":"#000000"}}},yAxis:{type:"value"},series:a.seriesData.map(r=>({name:r.name,type:"line",stack:"Total",areaStyle:{},data:r.data,axisLine:{lineStyle:{color:t.value?"#ffffff":"#000000"}},axisLabel:{color:t.value?"#ffffff":"#000000"}}))};e.setOption(n)};return k(()=>[a.chartWidth,a.chartHeight],()=>{e&&e.resize()}),k(()=>[a.xAxisData,a.seriesData,t.value],()=>{f()},{deep:!0}),b(()=>{f()}),D(()=>{e&&(e.dispose(),e=null)}),(n,r)=>(d(),q("div",{ref_key:"chart",ref:s,style:A({width:"100%",height:`${h.chartHeight}px`})},null,4))}},K=L(G,[["__scopeId","data-v-4c87a13a"]]),U={__name:"StackedBar",props:{title:{type:String,default:"Normalized Bar Chart"},xAxisData:{type:Array,required:!0},seriesData:{type:Array,required:!0},chartHeight:{type:Number,required:!0}},setup(h){z([F,H,I,B,N,C]);const a=h,p=S(),t=w(()=>p.dark.isActive),s=v(null);let e=null;const f=l=>{const o=[],c=l[0].data.map((u,i)=>l.reduce((_,Q)=>_+Q.data[i],0));return l.forEach(u=>{o.push({name:u.name,type:"bar",stack:"total",data:u.data.map((i,_)=>c[_]===0?0:i/c[_]*100)})}),o},n=()=>{if(!s.value)return;e||(e=E(s.value));const l={title:{text:a.title,left:"center",textStyle:{color:t.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:o=>{let c=`${o[0].axisValue}<br/>`;return o.forEach(u=>{c+=`${u.marker} ${u.seriesName}: ${u.value.toFixed(2)}%<br/>`}),c}},legend:{top:"10%",textStyle:{color:t.value?"#ffffff":"#000000"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:a.xAxisData,axisLine:{lineStyle:{color:t.value?"#ffffff":"#000000"}},axisLabel:{color:t.value?"#ffffff":"#000000"}},yAxis:{type:"value",axisLine:{lineStyle:{color:t.value?"#ffffff":"#000000"}},axisLabel:{color:t.value?"#ffffff":"#000000",formatter:"{value}%"}},series:f(a.seriesData)};e.setOption(l)};k(()=>[a.xAxisData,a.seriesData,t.value],()=>{n()},{deep:!0}),b(()=>{n(),window.addEventListener("resize",r)}),D(()=>{e&&(e.dispose(),e=null),window.removeEventListener("resize",r)});const r=()=>{e&&e.resize()};return(l,o)=>(d(),q("div",{ref_key:"chart",ref:s,style:A({width:"100%",height:`${h.chartHeight}px`})},null,4))}},$=L(U,[["__scopeId","data-v-e3c96ffb"]]),j={class:"col-6 q-pa-md"},J={class:"col-6 q-pa-md"},X={class:"col-6 q-pa-md"},Y={class:"col-6 q-pa-md"},Z={__name:"ServerEcharts",setup(h){const a=S(),p=T(),t=w(()=>a.screen.height*.73/2),s=w(()=>a.screen.width*.825),e=t.value;let f=null;const n=v({title:"",xAxis_list:[],series_list:[]}),r=v({title:"",xAxis_list:[],series_list:[]}),l=v({title:"",xAxis_list:[],series_list:[]}),o=v({title:"",xAxis_list:[],series_list:[]});function c(){R({url:"core/server/echarts/"}).then(i=>{n.value=i.cpu_data,r.value=i.memory_data,l.value=i.disk_data,o.value=i.network_data}).catch(i=>{a.notify({type:"error",message:i}),a.loading.hide()})}b(()=>{u(),c(),f=setInterval(()=>{c()},6e4)}),D(()=>{f&&clearInterval(f)});function u(){M.on("needLogin",i=>{i&&console.log("needLogin")})}return k(()=>p.langData,i=>{i&&c()}),(i,_)=>(d(),m(V,{class:"flex flex-col q-pa-md"},{default:W(()=>[x("div",{class:"row full-width",style:A({height:`${t.value}px`})},[x("div",j,[n.value.series_list.length?(d(),m(P,{key:0,title:n.value.title,"x-axis-data":n.value.xAxis_list,"series-data":n.value.series_list,"show-legend":!0,"chart-height":g(e),"chart-width":s.value},null,8,["title","x-axis-data","series-data","chart-height","chart-width"])):y("",!0)]),x("div",J,[r.value.series_list.length?(d(),m($,{key:0,title:r.value.title,"x-axis-data":r.value.xAxis_list,"series-data":r.value.series_list,"show-legend":!0,"chart-height":g(e),"chart-width":s.value},null,8,["title","x-axis-data","series-data","chart-height","chart-width"])):y("",!0)])],4),x("div",{class:"row full-width",style:A({height:`${t.value}px`})},[x("div",X,[l.value.series_list.length?(d(),m($,{key:0,title:l.value.title,"x-axis-data":l.value.xAxis_list,"series-data":l.value.series_list,"show-legend":!0,"chart-height":g(e),"chart-width":s.value},null,8,["title","x-axis-data","series-data","chart-height","chart-width"])):y("",!0)]),x("div",Y,[o.value.series_list.length?(d(),m(K,{key:0,title:o.value.title,"x-axis-data":o.value.xAxis_list,"series-data":o.value.series_list,"show-legend":!0,"chart-height":g(e),"chart-width":s.value},null,8,["title","x-axis-data","series-data","chart-height","chart-width"])):y("",!0)])],4)]),_:1}))}},ce=L(Z,[["__scopeId","data-v-bc173b96"]]);export{ce as default};
