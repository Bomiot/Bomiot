import{Q as Y}from"./QPage-DjgmKzZ_.js";import{u as Z}from"./use-meta-Drr87NGw.js";import{u as F}from"./use-quasar-CxlsMA-r.js";import{u as ee,Q as _,f as S}from"./QItemLabel-BRceraJL.js";import{a as B,r as s,o as M,w as I,a2 as P,a3 as Q,as as z,a6 as t,a7 as n,a8 as p,ad as r,a5 as o,a9 as c,av as V,ag as ae,aq as te,at as le,au as C,aK as U,aw as ne,K as A,ax as oe,aa as se,e as ue,ab as ie}from"./index-D6xcdmSy.js";import{a as re,b as de}from"./rtl-BJcSdsPV.js";import{Q as pe,a as me,b as fe}from"./QTable-mJIsuc0j.js";import{C as E}from"./ClosePopup-7DLdTx-I.js";import{e as ce,g as ve,p as ge}from"./axios-B_9szzRp.js";import{u as be}from"./language-BmNUDO97.js";import{u as xe}from"./vue-i18n.runtime-BS3IaizX.js";const ye={class:"q-pa-md"},ke={key:0},we={key:1},_e={class:"text-h6"},Ve={__name:"ExampleList",setup(R){const{t:l}=xe(),i=F(),$=ee(),q=be(),h=B(()=>[{name:"value",required:!0,label:l("example.value"),align:"left",field:"value"},{name:"status",label:l("example.status"),field:"status"},{name:"description",label:l("example.description"),field:"description"},{name:"created_time",label:l("created_time"),field:"created_time"},{name:"updated_time",label:l("updated_time"),field:"updated_time"},{name:"action",label:l("action"),align:"right"}]),y=B(()=>$.token),v=s([]),K=s([]),G=s([]),k=s(""),g=s(!1),d=s({}),x=s("create"),D=s(0),m=s({sortBy:"updated_time",descending:!1,page:1,rowsPerPage:30,rowsNumber:30}),L=B(()=>y.value!==""?Math.ceil(D.value/m.value.rowsPerPage):0),H=s(`${i.screen.height*.73}px`),J=s(`${i.screen.width*.825}px`),N=s(i.dark.isActive?"#121212":"#ffffff");async function f(u){let e={};u?e=u:e.pagination=m.value,await ve({url:"core/example/",params:{params:JSON.stringify({data__value__icontains:k.value}),page:e.pagination.page,max_page:e.pagination.rowsPerPage}}).then(a=>{v.value=a.results,D.value=a.count,K.value=a.team,G.value=a.department}).catch(a=>{i.notify({type:"error",message:a}),i.loading.hide()}).finally(()=>{i.loading.hide()}),m.value=e.pagination}function O(){x.value="create",d.value={},g.value=!0}function W(u){x.value="update",d.value={...v.value[u]},g.value=!0}function j(u){x.value="delete",d.value={...v.value[u]},g.value=!0}function T(){g.value=!1,d.value={}}async function w(u){await ge(`core/example/${u}/`,d.value).then(()=>{f(),T()}).catch(e=>{i.notify({type:"error",message:e}),i.loading.hide()}).finally(()=>{i.loading.hide()})}M(()=>{X(),f()}),I(()=>i.dark.isActive,u=>{N.value=u?"#121212":"#ffffff"});function X(){ce.on("needLogin",u=>{u&&(v.value=[],K.value=[],k.value="",D.value=0)})}return I(()=>q.langData,u=>{u&&f()}),(u,e)=>(Q(),P(se,null,[z("div",ye,[t(fe,{class:te(o(i).dark.isActive?"my-sticky-header-last-column-table-dark":"my-sticky-header-last-column-table"),flat:"",bordered:"",rows:v.value,columns:h.value,"row-key":"index",pagination:m.value,"onUpdate:pagination":e[6]||(e[6]=a=>m.value=a),separator:"cell","no-data-label":o(l)("nodata"),"rows-per-page-label":o(l)("per_page"),"rows-per-page-options":[30,50,200,1e3],"table-style":{height:H.value,width:J.value},"card-style":{backgroundColor:N.value},onRequest:f},{top:n(a=>[t(re,{flat:""},{default:n(()=>[t(c,{label:o(l)("refresh"),icon:"refresh",onClick:e[0]||(e[0]=b=>f())},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("refreshdata")),1)]),_:1})]),_:1},8,["label"]),t(c,{label:o(l)("new"),icon:"add",onClick:e[1]||(e[1]=b=>O())},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("new")),1)]),_:1})]),_:1},8,["label"])]),_:1}),t(de),t(V,{dense:"",debounce:"300",color:"primary",modelValue:k.value,"onUpdate:modelValue":[e[2]||(e[2]=b=>k.value=b),e[3]||(e[3]=b=>f())]},{append:n(()=>[t(ae,{name:"search"})]),default:n(()=>[e[16]||(e[16]=p(" > "))]),_:1,__:[16]},8,["modelValue"]),t(c,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":n(a=>[t(me,{props:a},{default:n(()=>[a.col.name==="action"?(Q(),P("div",ke,[t(c,{round:"",flat:"",icon:"edit",onClick:b=>W(a.rowIndex)},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("edit")),1)]),_:1})]),_:2},1032,["onClick"]),t(c,{round:"",flat:"",icon:"delete_sweep",onClick:b=>j(a.rowIndex)},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("delete")),1)]),_:1})]),_:2},1032,["onClick"])])):(Q(),P("div",we,r(a.value),1))]),_:2},1032,["props"])]),pagination:n(()=>[p(r(o(l)("total"))+r(L.value)+" "+r(o(l)("page"))+" ",1),t(pe,{modelValue:m.value.page,"onUpdate:modelValue":[e[4]||(e[4]=a=>m.value.page=a),e[5]||(e[5]=a=>f())],max:L.value,input:"",debounce:"300","input-class":"text-orange-10"},null,8,["modelValue","max"])]),_:1},8,["class","rows","columns","pagination","no-data-label","rows-per-page-label","table-style","card-style"])]),t(oe,{modelValue:g.value,"onUpdate:modelValue":e[15]||(e[15]=a=>g.value=a)},{default:n(()=>[t(le,{style:{width:"300px"},class:"q-px-sm q-pb-md"},{default:n(()=>[t(C,null,{default:n(()=>[z("div",_e,r(o(l)(`example.${x.value}`)),1)]),_:1}),t(S,{header:""},{default:n(()=>[p(r(o(l)("example.value")),1)]),_:1}),t(C,{class:"q-pt-none"},{default:n(()=>[t(V,{dense:"",modelValue:d.value.value,"onUpdate:modelValue":e[7]||(e[7]=a=>d.value.value=a),autofocus:"",onKeyup:e[8]||(e[8]=U(a=>w(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(S,{header:""},{default:n(()=>[p(r(o(l)("example.status")),1)]),_:1}),t(C,{class:"q-pt-none"},{default:n(()=>[t(V,{dense:"",modelValue:d.value.status,"onUpdate:modelValue":e[9]||(e[9]=a=>d.value.status=a),onKeyup:e[10]||(e[10]=U(a=>w(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(S,{header:""},{default:n(()=>[p(r(o(l)("example.description")),1)]),_:1}),t(C,{class:"q-pt-none"},{default:n(()=>[t(V,{dense:"",modelValue:d.value.description,"onUpdate:modelValue":e[11]||(e[11]=a=>d.value.description=a),onKeyup:e[12]||(e[12]=U(a=>w(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(ne,{align:"right"},{default:n(()=>[A(t(c,{flat:"",label:o(l)("cancel"),color:"primary",onClick:e[13]||(e[13]=a=>T())},null,8,["label"]),[[E]]),A(t(c,{flat:"",label:o(l)("submit"),color:"primary",onClick:e[14]||(e[14]=a=>w(x.value))},null,8,["label"]),[[E]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ke={__name:"ExampleReader",setup(R){const l=F(),i=s(!1),$=s(""),q=s(""),h=s("");return Z(()=>({title:$.value,meta:{description:{name:"description",content:q.value},keywords:{name:"keywords",content:h.value}}})),M(()=>{}),ue(()=>{}),I(()=>l.dark.isActive,y=>{i.value=y}),(y,v)=>(Q(),ie(Y,{class:"flex flex-top"},{default:n(()=>[t(Ve)]),_:1}))}};export{Ke as default};
