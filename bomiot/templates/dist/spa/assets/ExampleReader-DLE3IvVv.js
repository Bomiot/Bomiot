import{Q as j}from"./QPage-DT4gAogf.js";import{u as X}from"./use-meta-BJ95KbN_.js";import{u as L}from"./use-quasar-B5Aaq4NW.js";import{u as Y,Q as _,f as S}from"./QItemLabel-BhZTMoXs.js";import{a as B,r as u,o as F,w as I,a2 as P,a3 as Q,as as z,a6 as t,a7 as n,a8 as p,ad as i,a5 as o,a9 as c,av as V,ag as Z,aq as ee,at as ae,au as C,aK as U,aw as te,K as A,ax as le,aa as ne,e as oe,ab as se}from"./index-Cu4DQbqN.js";import{a as ue,b as re}from"./rtl-CAMjnO61.js";import{Q as ie,a as de,b as pe}from"./QTable-CzMGEqFI.js";import{C as E}from"./ClosePopup-bpvM-Pro.js";import{e as me,g as fe,p as ce}from"./axios-B6v3yPbu.js";import{u as ve}from"./language-D0uJhQql.js";import{u as ge}from"./vue-i18n.runtime-DMFdfjDe.js";const be={class:"q-pa-md"},xe={key:0},ye={key:1},ke={class:"text-h6"},we={__name:"ExampleList",setup(M){const{t:l}=ge(),r=L(),$=Y(),h=ve(),q=B(()=>[{name:"value",required:!0,label:l("example.value"),align:"left",field:"value"},{name:"status",label:l("example.status"),field:"status"},{name:"description",label:l("example.description"),field:"description"},{name:"created_time",label:l("created_time"),field:"created_time"},{name:"updated_time",label:l("updated_time"),field:"updated_time"},{name:"action",label:l("action"),align:"right"}]),y=B(()=>$.token),v=u([]),k=u(""),g=u(!1),d=u({}),x=u("create"),D=u(0),m=u({sortBy:"updated_time",descending:!1,page:1,rowsPerPage:30,rowsNumber:30}),K=B(()=>y.value!==""?Math.ceil(D.value/m.value.rowsPerPage):0),R=u(`${r.screen.height*.73}px`),G=u(`${r.screen.width*.825}px`),N=u(r.dark.isActive?"#121212":"#ffffff");async function f(s){let e={};s?e=s:e.pagination=m.value,await fe({url:"core/example/",params:{params:JSON.stringify({data__value__icontains:k.value}),page:e.pagination.page,max_page:e.pagination.rowsPerPage}}).then(a=>{v.value=a.results,D.value=a.count}).catch(a=>{r.notify({type:"error",message:a}),r.loading.hide()}).finally(()=>{r.loading.hide()}),m.value=e.pagination}function H(){x.value="create",d.value={},g.value=!0}function J(s){x.value="update",d.value={...v.value[s]},g.value=!0}function O(s){x.value="delete",d.value={...v.value[s]},g.value=!0}function T(){g.value=!1,d.value={}}async function w(s){await ce(`core/example/${s}/`,d.value).then(()=>{f(),T()}).catch(e=>{r.notify({type:"error",message:e}),r.loading.hide()}).finally(()=>{r.loading.hide()})}F(()=>{W(),f()}),I(()=>r.dark.isActive,s=>{N.value=s?"#121212":"#ffffff"});function W(){me.on("needLogin",s=>{s&&(v.value=[],k.value="",D.value=0)})}return I(()=>h.langData,s=>{s&&f()}),(s,e)=>(Q(),P(ne,null,[z("div",be,[t(pe,{class:ee(o(r).dark.isActive?"my-sticky-header-last-column-table-dark":"my-sticky-header-last-column-table"),flat:"",bordered:"",rows:v.value,columns:q.value,"row-key":"index",pagination:m.value,"onUpdate:pagination":e[6]||(e[6]=a=>m.value=a),separator:"cell","no-data-label":o(l)("nodata"),"rows-per-page-label":o(l)("per_page"),"rows-per-page-options":[30,50,200,1e3],"table-style":{height:R.value,width:G.value},"card-style":{backgroundColor:N.value},onRequest:f},{top:n(a=>[t(ue,{flat:""},{default:n(()=>[t(c,{label:o(l)("refresh"),icon:"refresh",onClick:e[0]||(e[0]=b=>f())},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(i(o(l)("refreshdata")),1)]),_:1})]),_:1},8,["label"]),t(c,{label:o(l)("new"),icon:"add",onClick:e[1]||(e[1]=b=>H())},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(i(o(l)("new")),1)]),_:1})]),_:1},8,["label"])]),_:1}),t(re),t(V,{dense:"",debounce:"300",color:"primary",modelValue:k.value,"onUpdate:modelValue":[e[2]||(e[2]=b=>k.value=b),e[3]||(e[3]=b=>f())]},{append:n(()=>[t(Z,{name:"search"})]),_:1},8,["modelValue"]),t(c,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":n(a=>[t(de,{props:a},{default:n(()=>[a.col.name==="action"?(Q(),P("div",xe,[t(c,{round:"",flat:"",icon:"edit",onClick:b=>J(a.rowIndex)},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(i(o(l)("edit")),1)]),_:1})]),_:2},1032,["onClick"]),t(c,{round:"",flat:"",icon:"delete_sweep",onClick:b=>O(a.rowIndex)},{default:n(()=>[t(_,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(i(o(l)("delete")),1)]),_:1})]),_:2},1032,["onClick"])])):(Q(),P("div",ye,i(a.value),1))]),_:2},1032,["props"])]),pagination:n(()=>[p(i(o(l)("total"))+i(K.value)+" "+i(o(l)("page"))+" ",1),t(ie,{modelValue:m.value.page,"onUpdate:modelValue":[e[4]||(e[4]=a=>m.value.page=a),e[5]||(e[5]=a=>f())],max:K.value,input:"",debounce:"300","input-class":"text-orange-10"},null,8,["modelValue","max"])]),_:1},8,["class","rows","columns","pagination","no-data-label","rows-per-page-label","table-style","card-style"])]),t(le,{modelValue:g.value,"onUpdate:modelValue":e[15]||(e[15]=a=>g.value=a)},{default:n(()=>[t(ae,{style:{width:"300px"},class:"q-px-sm q-pb-md"},{default:n(()=>[t(C,null,{default:n(()=>[z("div",ke,i(o(l)(`example.${x.value}`)),1)]),_:1}),t(S,{header:""},{default:n(()=>[p(i(o(l)("example.value")),1)]),_:1}),t(C,{class:"q-pt-none"},{default:n(()=>[t(V,{dense:"",modelValue:d.value.value,"onUpdate:modelValue":e[7]||(e[7]=a=>d.value.value=a),autofocus:"",onKeyup:e[8]||(e[8]=U(a=>w(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(S,{header:""},{default:n(()=>[p(i(o(l)("example.status")),1)]),_:1}),t(C,{class:"q-pt-none"},{default:n(()=>[t(V,{dense:"",modelValue:d.value.status,"onUpdate:modelValue":e[9]||(e[9]=a=>d.value.status=a),onKeyup:e[10]||(e[10]=U(a=>w(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(S,{header:""},{default:n(()=>[p(i(o(l)("example.description")),1)]),_:1}),t(C,{class:"q-pt-none"},{default:n(()=>[t(V,{dense:"",modelValue:d.value.description,"onUpdate:modelValue":e[11]||(e[11]=a=>d.value.description=a),onKeyup:e[12]||(e[12]=U(a=>w(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(te,{align:"right"},{default:n(()=>[A(t(c,{flat:"",label:o(l)("cancel"),color:"primary",onClick:e[13]||(e[13]=a=>T())},null,8,["label"]),[[E]]),A(t(c,{flat:"",label:o(l)("submit"),color:"primary",onClick:e[14]||(e[14]=a=>w(x.value))},null,8,["label"]),[[E]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ue={__name:"ExampleReader",setup(M){const l=L(),r=u(!1),$=u(""),h=u(""),q=u("");return X(()=>({title:$.value,meta:{description:{name:"description",content:h.value},keywords:{name:"keywords",content:q.value}}})),F(()=>{}),oe(()=>{}),I(()=>l.dark.isActive,y=>{r.value=y}),(y,v)=>(Q(),se(j,{class:"flex flex-top"},{default:n(()=>[t(we)]),_:1}))}};export{Ue as default};
