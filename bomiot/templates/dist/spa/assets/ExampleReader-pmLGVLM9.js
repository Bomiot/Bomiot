import{Q as Y}from"./QPage-jfhvxjua.js";import{u as Z}from"./use-meta-B2AcZUiy.js";import{u as G}from"./use-quasar-YIAhzlRm.js";import{u as ee,Q as V,f as D}from"./QItemLabel-CBTzOxdh.js";import{a as B,r as s,o as F,w as L,a2 as U,a3 as q,as as A,a6 as t,a7 as n,a8 as p,ad as r,a5 as o,a9 as v,K as I,a4 as ae,av as C,aJ as Q,ag as te,aq as le,at as ne,au as $,aw as oe,ax as se,aa as ue,e as re,ab as ie}from"./index-DA5wU65Q.js";import{a as de,b as me}from"./rtl-BUksX-Hb.js";import{Q as pe,a as fe,b as ce}from"./QTable-wSipynsH.js";import{C as E}from"./ClosePopup-8K99IgoO.js";import{e as ve,a as ge,t as be}from"./axios-BxiOjpGq.js";import{u as xe}from"./language-BAls7FvS.js";import{u as ye}from"./vue-i18n.runtime-DQPK7Hwk.js";const ke={class:"q-pa-md"},we={key:0},_e={key:1},Ve={class:"text-h6"},Ce={__name:"ExampleList",setup(M){const{t:l}=ye(),i=G(),y=ee(),h=xe(),P=B(()=>[{name:"value",required:!0,label:l("example.value"),align:"left",field:"value"},{name:"status",label:l("example.status"),field:"status"},{name:"description",label:l("example.description"),field:"description"},{name:"created_time",label:l("created_time"),field:"created_time"},{name:"updated_time",label:l("updated_time"),field:"updated_time"},{name:"action",label:l("action"),align:"right"}]),k=B(()=>y.token),g=s([]),K=s([]),R=s([]),w=s(""),b=s(!1),d=s({}),x=s("create"),S=s(0),f=s({sortBy:"updated_time",descending:!1,page:1,rowsPerPage:30,rowsNumber:30}),N=B(()=>k.value!==""?Math.ceil(S.value/f.value.rowsPerPage):0),J=s(`${i.screen.height*.73}px`),H=s(`${i.screen.width*.825}px`),T=s(i.dark.isActive?"#121212":"#ffffff");function m(u){let e={};u?e=u:e.pagination=f.value,ge({url:"core/example/",params:{params:JSON.stringify({data__value__icontains:w.value}),page:e.pagination.page,max_page:e.pagination.rowsPerPage}}).then(a=>{g.value=a.results,S.value=a.count,K.value=a.team,R.value=a.department}).catch(a=>{i.notify({type:"error",message:a}),i.loading.hide()}),f.value=e.pagination}function O(){x.value="create",b.value=!0}function W(u){x.value="update",d.value={...g.value[u]},b.value=!0}function j(u){x.value="delete",d.value={...g.value[u]},b.value=!0}function z(){b.value=!1,d.value={}}async function _(u){await be(`core/example/${u}/`,d.value).then(()=>{m(),z()}).catch(e=>{i.notify({type:"error",message:e}),i.loading.hide()})}F(()=>{X(),m()}),L(()=>i.dark.isActive,u=>{T.value=u?"#121212":"#ffffff"});function X(){ve.on("needLogin",u=>{u&&(g.value=[],K.value=[],w.value="",S.value=0)})}return L(()=>h.langData,u=>{u&&m()}),(u,e)=>(q(),U(ue,null,[A("div",ke,[t(ce,{class:le(o(i).dark.isActive?"my-sticky-header-last-column-table-dark":"my-sticky-header-last-column-table"),flat:"",bordered:"",rows:g.value,columns:P.value,"row-key":"index",pagination:f.value,"onUpdate:pagination":e[7]||(e[7]=a=>f.value=a),separator:"cell","no-data-label":o(l)("nodata"),"rows-per-page-label":o(l)("per_page"),"rows-per-page-options":[30,50,200,1e3],"table-style":{height:J.value,width:H.value},"card-style":{backgroundColor:T.value},onRequest:m},{top:n(a=>[t(de,{flat:""},{default:n(()=>[I(t(v,{label:o(l)("refresh"),icon:"refresh",onClick:e[0]||(e[0]=c=>m())},{default:n(()=>[t(V,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("refreshdata")),1)]),_:1})]),_:1},8,["label"]),[[ae,o(y).userPermissionGet("Get Example List")]]),t(v,{label:o(l)("new"),icon:"add",onClick:e[1]||(e[1]=c=>O())},{default:n(()=>[t(V,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("new")),1)]),_:1})]),_:1},8,["label"])]),_:1}),t(me),t(C,{dense:"",debounce:"300",color:"primary",modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=c=>w.value=c),onInput:e[3]||(e[3]=c=>m()),onKeyup:e[4]||(e[4]=Q(c=>m(),["enter"]))},{append:n(()=>[t(te,{name:"search"})]),_:1},8,["modelValue"]),t(v,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":n(a=>[t(fe,{props:a},{default:n(()=>[a.col.name==="action"?(q(),U("div",we,[t(v,{round:"",flat:"",icon:"edit",onClick:c=>W(a.rowIndex)},{default:n(()=>[t(V,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("edit")),1)]),_:1})]),_:2},1032,["onClick"]),t(v,{round:"",flat:"",icon:"delete_sweep",onClick:c=>j(a.rowIndex)},{default:n(()=>[t(V,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:n(()=>[p(r(o(l)("delete")),1)]),_:1})]),_:2},1032,["onClick"])])):(q(),U("div",_e,r(a.value),1))]),_:2},1032,["props"])]),pagination:n(()=>[p(r(o(l)("total"))+r(N.value)+" "+r(o(l)("page"))+" ",1),t(pe,{modelValue:f.value.page,"onUpdate:modelValue":[e[5]||(e[5]=a=>f.value.page=a),e[6]||(e[6]=a=>m())],max:N.value,input:"","input-class":"text-orange-10"},null,8,["modelValue","max"])]),_:1},8,["class","rows","columns","pagination","no-data-label","rows-per-page-label","table-style","card-style"])]),t(se,{modelValue:b.value,"onUpdate:modelValue":e[16]||(e[16]=a=>b.value=a)},{default:n(()=>[t(ne,{style:{width:"300px"},class:"q-px-sm q-pb-md"},{default:n(()=>[t($,null,{default:n(()=>[A("div",Ve,r(o(l)(`example.${x.value}`)),1)]),_:1}),t(D,{header:""},{default:n(()=>[p(r(o(l)("example.value")),1)]),_:1}),t($,{class:"q-pt-none"},{default:n(()=>[t(C,{dense:"",modelValue:d.value.value,"onUpdate:modelValue":e[8]||(e[8]=a=>d.value.value=a),autofocus:"",onKeyup:e[9]||(e[9]=Q(a=>_(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(D,{header:""},{default:n(()=>[p(r(o(l)("example.status")),1)]),_:1}),t($,{class:"q-pt-none"},{default:n(()=>[t(C,{dense:"",modelValue:d.value.status,"onUpdate:modelValue":e[10]||(e[10]=a=>d.value.status=a),onKeyup:e[11]||(e[11]=Q(a=>_(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(D,{header:""},{default:n(()=>[p(r(o(l)("example.description")),1)]),_:1}),t($,{class:"q-pt-none"},{default:n(()=>[t(C,{dense:"",modelValue:d.value.description,"onUpdate:modelValue":e[12]||(e[12]=a=>d.value.description=a),onKeyup:e[13]||(e[13]=Q(a=>_(),["enter"])),rules:[a=>a.length>1||o(l)("example.error")]},null,8,["modelValue","rules"])]),_:1}),t(oe,{align:"right"},{default:n(()=>[I(t(v,{flat:"",label:o(l)("cancel"),color:"primary",onClick:e[14]||(e[14]=a=>z())},null,8,["label"]),[[E]]),I(t(v,{flat:"",label:o(l)("submit"),color:"primary",onClick:e[15]||(e[15]=a=>_(x.value))},null,8,["label"]),[[E]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ke={__name:"ExampleReader",setup(M){const l=G(),i=s(!1),y=s(""),h=s(""),P=s("");return Z(()=>({title:y.value,meta:{description:{name:"description",content:h.value},keywords:{name:"keywords",content:P.value}}})),F(()=>{}),re(()=>{}),L(()=>l.dark.isActive,k=>{i.value=k}),(k,g)=>(q(),ie(Y,{class:"flex flex-top"},{default:n(()=>[t(Ce)]),_:1}))}};export{Ke as default};
