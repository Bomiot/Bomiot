import{c as T,a as s,h as g,d as K,C as se,D as le,b5 as ue,R as re,E as ie,r as A,F as ce,al as de,G as fe,b6 as ve,H as ge,b7 as he,w as D,b8 as me,z as be,b9 as ye,ba as R,M as Be,bb as Pe,T as Te,e as xe,g as Ce,bc as Se,bd as ke,be as qe,B as pe}from"./index-DH65uPR4.js";import{g as Oe,v as H,i as Ee,j as we,k as Fe,p as Q,r as j,s as Me,l as Ae}from"./QItemLabel-BEeCnilI.js";const Qe=T({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:l}){const u=s(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(o=>e[o]===!0).map(o=>`q-btn-group--${o}`).join(" ");return`q-btn-group row no-wrap${r.length!==0?" "+r:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:u.value},K(l.default))}}),je=T({name:"QSpace",setup(){const e=g("div",{class:"q-space"});return()=>e}}),Ke=T({name:"QMenu",inheritAttrs:!1,props:{...Oe,...se,...le,...ue,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:H},self:{type:String,validator:H},offset:{type:Array,validator:Ee},scrollTarget:re,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ie,"click","escapeKey"],setup(e,{slots:l,emit:u,attrs:r}){let o=null,v,c,h;const x=Ce(),{proxy:m}=x,{$q:a}=m,n=A(null),i=A(!1),G=s(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),L=ce(e,a),{registerTick:W,removeTick:$}=de(),{registerTimeout:C}=fe(),{transitionProps:_,transitionStyle:z}=ve(e),{localScrollTarget:S,changeScrollEvent:I,unconfigureScrollTarget:U}=we(e,F),{anchorEl:d,canShow:J}=Fe({showing:i}),{hide:k}=ge({showing:i,canShow:J,handleShow:Z,handleHide:ee,hideOnRouteChange:G,processOnMount:!0}),{showPortal:q,hidePortal:p,renderPortal:N}=he(x,n,oe,"menu"),b={anchorEl:d,innerRef:n,onClickOutside(t){if(e.persistent!==!0&&i.value===!0)return k(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&pe(t),!0}},O=s(()=>Q(e.anchor||(e.cover===!0?"center middle":"bottom start"),a.lang.rtl)),V=s(()=>e.cover===!0?O.value:Q(e.self||"top start",a.lang.rtl)),X=s(()=>(e.square===!0?" q-menu--square":"")+(L.value===!0?" q-menu--dark q-dark":"")),Y=s(()=>e.autoClose===!0?{onClick:te}:{}),E=s(()=>i.value===!0&&e.persistent!==!0);D(E,t=>{t===!0?(ke(B),Ae(b)):(R(B),j(b))});function y(){Se(()=>{let t=n.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function Z(t){if(o=e.noRefocus===!1?document.activeElement:null,me(M),q(),F(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const P=be(t);if(P.left!==void 0){const{top:ae,left:ne}=d.value.getBoundingClientRect();v={left:P.left-ne,top:P.top-ae}}}c===void 0&&(c=D(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,f)),e.noFocus!==!0&&document.activeElement.blur(),W(()=>{f(),e.noFocus!==!0&&y()}),C(()=>{a.platform.is.ios===!0&&(h=e.autoClose,n.value.click()),f(),q(!0),u("show",t)},e.transitionDuration)}function ee(t){$(),p(),w(!0),o!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?o.closest('[tabindex]:not([tabindex^="-"])'):void 0)||o).focus(),o=null),C(()=>{p(!0),u("hide",t)},e.transitionDuration)}function w(t){v=void 0,c!==void 0&&(c(),c=void 0),(t===!0||i.value===!0)&&(ye(M),U(),j(b),R(B)),t!==!0&&(o=null)}function F(){(d.value!==null||e.scrollTarget!==void 0)&&(S.value=Be(d.value,e.scrollTarget),I(S.value,f))}function te(t){h!==!0?(Pe(m,t),u("click",t)):h=!1}function M(t){E.value===!0&&e.noFocus!==!0&&qe(n.value,t.target)!==!0&&y()}function B(t){u("escapeKey"),k(t)}function f(){Me({targetEl:n.value,offset:e.offset,anchorEl:d.value,anchorOrigin:O.value,selfOrigin:V.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function oe(){return g(Te,_.value,()=>i.value===!0?g("div",{role:"menu",...r,ref:n,tabindex:-1,class:["q-menu q-position-engine scroll"+X.value,r.class],style:[r.style,z.value],...Y.value},K(l.default)):null)}return xe(w),Object.assign(m,{focus:y,updatePosition:f}),N}});let De=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,De=e.scrollLeft>=0,e.remove()}export{Ke as Q,Qe as a,je as b,De as r};
