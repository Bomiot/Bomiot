import{a as b,h as g,d as s,e as K,E as se,U as le,aT as ue,F as ie,G as re,g as ce,r as A,H as de,al as fe,I as ve,aU as ge,J as he,aV as me,w as M,aW as ye,aX as H,aY as Be,z as Pe,aZ as Te,P as be,a_ as xe,T as Se,j as ke,a$ as qe,b0 as Ce,D as Ee}from"./index-C_Y_PPsx.js";import{v as Oe,g as Q,i as pe,j as we,k as Fe,p as R,l as De,r as j,s as Ae}from"./QItemLabel-DS2al5LE.js";const Re=b({name:"QSpace",setup(){const e=g("div",{class:"q-space"});return()=>e}}),je=b({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:l}){const u=s(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(o=>e[o]===!0).map(o=>`q-btn-group--${o}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:u.value},K(l.default))}}),Ke=b({name:"QMenu",inheritAttrs:!1,props:{...pe,...re,...ie,...ue,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Q},self:{type:String,validator:Q},offset:{type:Array,validator:Oe},scrollTarget:le,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...se,"click","escapeKey"],setup(e,{slots:l,emit:u,attrs:i}){let o=null,v,c,h;const x=ce(),{proxy:m}=x,{$q:a}=m,n=A(null),r=A(!1),W=s(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),$=de(e,a),{registerTick:G,removeTick:L}=fe(),{registerTimeout:S}=ve(),{transitionProps:U,transitionStyle:_}=ge(e),{localScrollTarget:k,changeScrollEvent:I,unconfigureScrollTarget:z}=we(e,F),{anchorEl:d,canShow:J}=Fe({showing:r}),{hide:q}=he({showing:r,canShow:J,handleShow:N,handleHide:ee,hideOnRouteChange:W,processOnMount:!0}),{showPortal:C,hidePortal:E,renderPortal:V}=me(x,n,oe,"menu"),y={anchorEl:d,innerRef:n,onClickOutside(t){if(e.persistent!==!0&&r.value===!0)return q(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&Ee(t),!0}},O=s(()=>R(e.anchor||(e.cover===!0?"center middle":"bottom start"),a.lang.rtl)),X=s(()=>e.cover===!0?O.value:R(e.self||"top start",a.lang.rtl)),Y=s(()=>(e.square===!0?" q-menu--square":"")+($.value===!0?" q-menu--dark q-dark":"")),Z=s(()=>e.autoClose===!0?{onClick:te}:{}),p=s(()=>r.value===!0&&e.persistent!==!0);M(p,t=>{t===!0?(ye(P),De(y)):(H(P),j(y))});function B(){qe(()=>{let t=n.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function N(t){if(o=e.noRefocus===!1?document.activeElement:null,Be(D),C(),F(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const T=Pe(t);if(T.left!==void 0){const{top:ae,left:ne}=d.value.getBoundingClientRect();v={left:T.left-ne,top:T.top-ae}}}c===void 0&&(c=M(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,f)),e.noFocus!==!0&&document.activeElement.blur(),G(()=>{f(),e.noFocus!==!0&&B()}),S(()=>{a.platform.is.ios===!0&&(h=e.autoClose,n.value.click()),f(),C(!0),u("show",t)},e.transitionDuration)}function ee(t){L(),E(),w(!0),o!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t?.type.indexOf("key")===0?o.closest('[tabindex]:not([tabindex^="-"])'):void 0)||o).focus(),o=null),S(()=>{E(!0),u("hide",t)},e.transitionDuration)}function w(t){v=void 0,c!==void 0&&(c(),c=void 0),(t===!0||r.value===!0)&&(Te(D),z(),j(y),H(P)),t!==!0&&(o=null)}function F(){(d.value!==null||e.scrollTarget!==void 0)&&(k.value=be(d.value,e.scrollTarget),I(k.value,f))}function te(t){h!==!0?(xe(m,t),u("click",t)):h=!1}function D(t){p.value===!0&&e.noFocus!==!0&&Ce(n.value,t.target)!==!0&&B()}function P(t){e.noEscDismiss!==!0&&(u("escapeKey"),q(t))}function f(){Ae({targetEl:n.value,offset:e.offset,anchorEl:d.value,anchorOrigin:O.value,selfOrigin:X.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function oe(){return g(Se,U.value,()=>r.value===!0?g("div",{role:"menu",...i,ref:n,tabindex:-1,class:["q-menu q-position-engine scroll"+Y.value,i.class],style:[i.style,_.value],...Z.value},K(l.default)):null)}return ke(w),Object.assign(m,{focus:B,updatePosition:f}),V}});let Me=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Me=e.scrollLeft>=0,e.remove()}export{Ke as Q,Re as a,je as b,Me as r};
