import{Q as D}from"./QPage-DbGNdCeL.js";import{u as I}from"./use-meta-BqERCyEc.js";import{u as P}from"./use-quasar-Bk_OAqbA.js";import{u as N,Q as L}from"./QItemLabel-BtUMSWKk.js";import{a as k,r as n,o as S,e as B,w,a5 as T,a6 as M,a9 as s,aa as u,ac as C,a8 as i,ab as q,ag as f,at as R,ae as z}from"./index-DbVLJLI3.js";import{a as E,b as F}from"./rtl-kD0YC2jg.js";import{Q as G,a as H,b as W}from"./QTable-CRk74jX3.js";import{e as j,g as J}from"./axios-zoEVadDN.js";import{u as K}from"./language-C_wcYhO5.js";import{u as O}from"./vue-i18n.runtime-DG0tbeBL.js";const X={class:"q-pa-md"},Y={__name:"CPU",setup(U){const{t:a}=O(),l=P(),d=N(),_=K(),v=k(()=>[{name:"cpu_frequency",required:!0,label:a("cpu.cpu_frequency"),align:"left",field:"cpu_frequency"},{name:"min_cpu_frequency",align:"center",label:a("cpu.min_cpu_frequency"),field:"min_cpu_frequency"},{name:"max_cpu_frequency",align:"center",label:a("cpu.max_cpu_frequency"),field:"max_cpu_frequency"},{name:"physical_cores",align:"center",label:a("cpu.physical_cores"),field:"physical_cores"},{name:"logical_cores",align:"center",label:a("cpu.logical_cores"),field:"logical_cores"},{name:"cpu_usage",align:"center",label:a("cpu.cpu_usage"),field:"cpu_usage"},{name:"updated_time",align:"center",label:a("updated_time"),field:"updated_time"}]),m=k(()=>d.token),g=n([]),x=n([]),y=n(0);let b=null;const c=n({sortBy:"updated_time",descending:!1,page:1,rowsPerPage:30,rowsNumber:30}),h=k(()=>m.value!==""?Math.ceil(y.value/c.value.rowsPerPage):0),V=n(l.screen.height*.73+"px"),$=n(l.screen.width*.825+"px"),Q=n(l.dark.isActive?"#121212":"#ffffff");function p(o){let t={};o?t=o:t.pagination=c.value,d.tokenDataGet!==""&&(J({url:"core/cpu/",params:{page:t.pagination.page,max_page:t.pagination.rowsPerPage}}).then(e=>{g.value=e.results.map(r=>({...r,cpu_frequency:r.cpu_frequency,min_cpu_frequency:r.min_cpu_frequency,max_cpu_frequency:r.max_cpu_frequency,physical_cores:r.physical_cores,logical_cores:r.logical_cores,cpu_usage:r.cpu_usage+"%",updated_time:r.updated_time})),y.value=e.count,x.value=e.users}).catch(e=>{l.notify({type:"error",message:e}),l.loading.hide()}),c.value=t.pagination)}S(()=>{A(),p(),b=setInterval(()=>{p()},6e4)}),B(()=>{b&&clearInterval(b)}),w(()=>l.dark.isActive,o=>{Q.value=o?"#121212":"#ffffff"});function A(){j.on("needLogin",o=>{o&&(g.value=[],x.value=[],y.value=0)})}return w(()=>_.langData,o=>{o&&p()}),(o,t)=>(T(),M("div",X,[s(W,{class:R(i(l).dark.isActive?"my-sticky-header-column-table-dark":"my-sticky-header-column-table"),flat:"",bordered:"",rows:g.value,columns:v.value,"row-key":"index",pagination:c.value,"onUpdate:pagination":t[3]||(t[3]=e=>c.value=e),separator:"cell","no-data-label":i(a)("nodata"),"rows-per-page-label":i(a)("per_page"),"rows-per-page-options":[10,30,50,200,1e3],"table-style":{height:V.value,width:$.value},"card-style":{backgroundColor:Q.value},onRequest:p},{top:u(e=>[s(E,{flat:""},{default:u(()=>[s(C,{label:i(a)("refresh"),icon:"refresh",onClick:t[0]||(t[0]=r=>p())},{default:u(()=>[s(L,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:u(()=>[q(f(i(a)("refreshdata")),1)]),_:1})]),_:1},8,["label"])]),_:1}),s(F),s(C,{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":u(e=>[s(G,{props:e},{default:u(()=>[q(f(e.value),1)]),_:2},1032,["props"])]),pagination:u(()=>[q(f(i(a)("total"))+f(h.value)+" "+f(i(a)("page"))+" ",1),s(H,{modelValue:c.value.page,"onUpdate:modelValue":[t[1]||(t[1]=e=>c.value.page=e),t[2]||(t[2]=e=>p())],max:h.value,input:"","input-class":"text-orange-10"},null,8,["modelValue","max"])]),_:1},8,["class","rows","columns","pagination","no-data-label","rows-per-page-label","table-style","card-style"])]))}},ce={__name:"CPUReader",setup(U){const a=P(),l=n(!1),d=n(""),_=n(""),v=n("");return I(()=>({title:d.value,meta:{description:{name:"description",content:_.value},keywords:{name:"keywords",content:v.value}}})),S(()=>{}),B(()=>{}),w(()=>a.dark.isActive,m=>{l.value=m}),(m,g)=>(T(),z(D,{class:"flex flex-top"},{default:u(()=>[s(Y)]),_:1}))}};export{ce as default};
